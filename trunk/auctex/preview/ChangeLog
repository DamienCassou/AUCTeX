2004-08-09  David Kastrup  <dakas@users.sourceforge.net>

	* latex/preview.dtx (showlabels): work around ntheorem/amsmath
	bug.

	* preview.el (preview-gs-image-type-alist): Add fallback for
	'postscript image type (not yet used).
	(preview-dvipng-command): Add documentation about
	`preview-dvipng-image-type'.  Change options to `-picky
	-noghostscript' to work with dvipng 1.2.
	(preview-dvipng-image-type): New variable.
	(preview-gs-open): Don't barf until we know what device will
	actually be used.
	(preview-gs-dvips-process-setup): Complain about unavailable
	devices here.
	(preview-dvipng-process-setup): And here.
	(preview-dvipng-process-setup, preview-dvipng-place-all): Use
	`preview-dvipng-image-type'.
	(preview-TeX-inline-sentinel): Change "abnormally with code 1" and
	"finished" exit status message.
	(preview-dump-replacements, preview-undump-replacements): Don't
	match command name as specifically.
	(preview-report-bug): Report more variables.

2004-08-07  David Kastrup  <dakas@users.sourceforge.net>

	* doc/macros.texi: New @ConTeXt{} macro, change appearance of
	@previewlatex{}.

	* doc/faq.texi (Customization): Presentation classes should work
	mostly.
	(Customization): Remove troubleshooting for `xy.sty'.
	(Requirements): Add AUCTeX 11.50 for PDFLaTeX.
	(Requirements): Mention dvipng.
	(Customization): PDFLaTeX is supported now.
	(Customization): ConTeXt is supported by AUCTeX, PDFLaTeX too.
	`Only' style support is missing now.

	* latex/preview.dtx: workaround for `xy.sty' in `textmath' code.

2004-08-04  David Kastrup  <dakas@users.sourceforge.net>

	* aclocal.m4: Merge a few AUCTeX changes.

2004-08-03  David Kastrup  <dakas@users.sourceforge.net>

	* preview.el (preview-walk-document): Current buffer and its
	master are always considered part of the document.
	(preview-dvipng-command): Use -noghostscript option.
	(preview-dvipng): Remove the almost unused customization group
	'preview-dvipng.

2004-08-02  David Kastrup  <dakas@users.sourceforge.net>

	* preview.el (preview-extract-bb): remove old outcommented version.
	(preview-dvipng-command): Use -no-image-on-warn option.
	(preview-pdf2dsc-process-setup): Oops, just use
	`preview-gs-image-type' here.
	(preview-dvipng-sentinel): Don't delete dvi file since it might be
	needed in `dvipng-place-all'.
	(preview-dvipng-place-all): Start dvips/GhostScript if some image
	files are missing.  Delete dvi file if none are missing.

2004-07-28  David Kastrup  <dakas@users.sourceforge.net>

	* doc/problems.texi (Too small bounding boxes): Fix node
	crosslinks.

	* latex/preview.dtx: Tiny change to placate font-latex.

	* latex/README-preview: Explain that PDF may be produced.

	* doc/wininstall.texi: Remove advice about failing byte-compiles:
	we should have this covered by now.

	* doc/problems.texi (LaTeX international characters): remove node.

	* doc/preview-latex.texi (Misplaced previews): Refer to x-symbol
	node instead of 8bit testing.

	* doc/install.texi (Configure): Remove --disable-8bit-test
	description.

	* preview.el (preview-parse-messages): Simplify line match.

	* preview-latex.spec: Several changes of %{buildroot} uses and of
	infodir.  Doubtful whether this will work with Fedora.

	* configure.in: Remove all 8bit-cleanness testing.

	* aclocal.m4 (EMACS_LISP): just write out a string expression
	without change or echo.  Document the macro.

	* doc/Makefile.in (prefix) (packagedir) (datadir) (infodir):
	preserve trailing backslashes.

	* Makefile.in (INSTALL) (INSTALL_DATA): Don't munge them for
	trailing backslashes.

2004-07-27  David Kastrup  <dakas@users.sourceforge.net>

	* preview.el (preview-dvipng): New customization group.
	(preview-image-creators): Remove ghostscript options here.
	(preview-gs-image-type-alist): New variable for lookup of
	Ghostscript options.
	(preview-gs-open): Remove imagetype and gs-optionlist arguments.
	Instead, look them up in preview-gs-image-type-alist.
	(preview-gs-dvips-process-setup): Setup GhostScript command line
	at different place.
	(preview-gs-dvips-process-setup): Use preview-gs-image-type, not
	preview-image-type for extension.
	(preview-dvipng-open): Removed.
	(preview-dvipng-process-setup): Setup GhostScript fallback.
	(preview-pdf2dsc-process-setup): Don't setup GhostScript here.
	(preview-error-quote): Fix bugs, only convert last ^^ sequence
	when a long string of ^^ exists.

2004-07-16  David Kastrup  <dakas@users.sourceforge.net>

	* Makefile.in (INSTALL_DATA): Use `$(null)' at end of variables at
	end of lines instead of `#'

2004-07-15  David Kastrup  <dakas@users.sourceforge.net>

	* preview.el (preview-format-mml): Somewhat different code.
	(preview-error-quote): New function for generating a matching
	regexp to deal with ^^ type error messages.  In short: forget
	about 8-bit-cleanliness.
	(preview-parse-messages): Use it.

2004-05-08  David Kastrup  <dakas@users.sourceforge.net>

	* preview.el (preview-format-mml): Determine MIME format from
	file name properly.  And don't return anything for bad overlays.

	* Split ChangeLog.1 off, create dvipng/ChangeLog.

	* preview.el (preview-gs-sentinel): Add info about GhostScript
	finishing to run buffer.
	(preview-gs-restart): Same for start.
	(preview-gs-color-string): Cater for border without mask color
	(didn't we do that already?)

2004-04-23  David Kastrup  <dakas@users.sourceforge.net>

	* preview.el (preview-gs-color-string)
	(preview-dvipng-color-string): Try to do something reasonably sane
	when a non-nil border thickness is specified, but no color.

2004-04-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* .cvsignore: Added "autom4te.cache".

2004-04-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* doc/preview-latex.texi (Simple customization): Don't "unlispify"
	variable names.

2004-04-12  David Kastrup  <dakas@users.sourceforge.net>

	* Release 0.8.1

	* preview.el (preview-dump-replacements): Use regexp not
	triggering bugs in older Emacsen.
	(preview-dump-replacements): Same here.

	* RELEASE, configure.in, doc/preview-latex.texi: Adapt to 0.8.1

	* preview-latex.spec: xemacspkgdir has changed in recent XEmacs
	releases for Redhat.

	* prv-xemacs.el (preview-mode-setup): Remove non-existent menu.

	* prv-emacs.el (preview-mode-setup): Remove non-existent menu
	"copied" from TeX-command-list to Command menu.

	* Release 0.8
	
	* RELEASE: prepare for 0.8

	* preview-latex.spec: prepare for 0.8, bump XEmacs to 21.4.9.
