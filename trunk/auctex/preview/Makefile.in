
@SET_MAKE@
LATEX=@LATEX@
TEX=@TEX@
EMACS=@EMACS@

prefix = @prefix@
lispdir = @lispdir@/preview
datadir = @datadir@
previewtexmfdir = @previewtexmfdir@
previewdocdir = @previewdocdir@


INSTALL=@INSTALL@
INSTALL_DATA=@INSTALL_DATA@

all: preview.sty prauctex.def preview.drv \
   preview-mk.ins preview.dvi preview.elc

install: install-texmf install-el

install-el: preview.elc preview.el
	-mkdir -p $(lispdir)
	$(INSTALL_DATA) preview.elc $(lispdir)
	$(INSTALL_DATA) preview.el $(lispdir)

install-texmf: preview.sty prauctex.def 
	-mkdir -p $(previewtexmfdir)
	$(INSTALL_DATA) preview.sty $(previewtexmfdir)
	$(INSTALL_DATA) prauctex.def $(previewtexmfdir)
#	$(INSTALL_DATA) preview.dvi $(previewdvidir)

preview-mk.ins: preview.dtx bootstrap.ins
	$(TEX) -interaction nonstopmode bootstrap.ins

preview.sty prauctex.def preview.drv: preview.dtx preview-mk.ins
	$(TEX) -interaction nonstopmode preview-mk.ins

preview.dvi: preview.drv preview.dtx
	$(LATEX) -interaction nonstopmode preview.drv

preview.elc: preview.el
	$(EMACS) -batch -q -no-site-file -f batch-byte-compile preview.el
