;;; cyrillic.el - Support for Cyrillic characters.

;;; Commentary:

;; This file contains support for cyrillic character sets.

;; The Koi8, CP866, and CP1251 character sets are from Andrew Hume's
;; tcs program.

;; The ISO 8859 5 character set is from RFC 1345.

;; The TeX encodings and QWERTY keyboard mappings are from
;; jsmith@king.mcs.drexel.edu (Justin R. Smith).
;;
;; Here is a keyboard mapping for Cyrillic text (Tex mode corresponds
;; to the AMS Cyrillic encoding and the koi mode produces the
;; koi8 encoding scheme, which is the Cyrillic version of ASCII).
;; We have a number of Russian students who want to be able to
;; edit cyrillic texts. We use a version of emacs with an 8-bit patch
;; and a Cyrillic font under X-windows.
;; ---
;; Cyrillic keyboard mapping table.
;; Produced by Serge Vakulenko, <vak@kiae.su>, Moscow.
;;
;; Russian YAWERTY keyboard layout implemented.
;; Cyrillic characters are entered in koi8 encoding.
;;
;; Public domain.  Share and enjoy.

;;; Code:

(require 'remap)

;; Mappings

(remap-define-map "ISO 8859 5"
  "ISO Cyrillic"
  '((161 1025)
    (162 1026)
    (163 1027)
    (164 1028)
    (165 1029)
    (166 1030)
    (167 1031)
    (168 1032)
    (169 1033)
    (170 1034)
    (171 1035)
    (172 1036)
    (173 173)
    (174 1038)
    (175 1039)
    (176 1040)
    (177 1041)
    (178 1042)
    (179 1043)
    (180 1044)
    (181 1045)
    (182 1046)
    (183 1047)
    (184 1048)
    (185 1049)
    (186 1050)
    (187 1051)
    (188 1052)
    (189 1053)
    (190 1054)
    (191 1055)
    (192 1056)
    (193 1057)
    (194 1058)
    (195 1059)
    (196 1060)
    (197 1061)
    (198 1062)
    (199 1063)
    (200 1064)
    (201 1065)
    (202 1066)
    (203 1067)
    (204 1068)
    (205 1069)
    (206 1070)
    (207 1071)
    (208 1072)
    (209 1073)
    (210 1074)
    (211 1075)
    (212 1076)
    (213 1077)
    (214 1078)
    (215 1079)
    (216 1080)
    (217 1081)
    (218 1082)
    (219 1083)
    (220 1084)
    (221 1085)
    (222 1086)
    (223 1087)
    (224 1088)
    (225 1089)
    (226 1090)
    (227 1091)
    (228 1092)
    (229 1093)
    (230 1094)
    (231 1095)
    (232 1096)
    (233 1097)
    (234 1098)
    (235 1099)
    (236 1100)
    (237 1101)
    (238 1102)
    (239 1103)
    (240 8470)
    (241 1105)
    (242 1106)
    (243 1107)
    (244 1108)
    (245 1109)
    (246 1110)
    (247 1111)
    (248 1112)
    (249 1113)
    (250 1114)
    (251 1115)
    (252 1116)
    (253 167)
    (254 1118)
    (255 1119)))


(remap-define-map "Koi8"
  '((128 -1)
    (129 -1)
    (130 -1)
    (131 -1)
    (132 -1)
    (133 -1)
    (134 -1)
    (135 -1)
    (136 -1)
    (137 -1)
    (138 -1)
    (139 -1)
    (140 -1)
    (141 -1)
    (142 -1)
    (143 -1)
    (144 -1)
    (145 -1)
    (146 -1)
    (147 -1)
    (148 -1)
    (149 -1)
    (150 -1)
    (151 -1)
    (152 -1)
    (153 -1)
    (154 -1)
    (155 -1)
    (156 -1)
    (157 -1)
    (158 -1)
    (159 -1)
    (160 -1)
    (161 -1)
    (162 -1)
    (163 -1)
    (164 -1)
    (165 -1)
    (166 -1)
    (167 -1)
    (168 -1)
    (169 -1)
    (170 -1)
    (171 -1)
    (172 -1)
    (173 -1)
    (174 -1)
    (175 -1)
    (176 -1)
    (177 -1)
    (178 -1)
    (179 -1)
    (180 -1)
    (181 -1)
    (182 -1)
    (183 -1)
    (184 -1)
    (185 -1)
    (186 -1)
    (187 -1)
    (188 -1)
    (189 -1)
    (190 -1)
    (191 -1)
    (192 1102)
    (193 1072)
    (194 1073)
    (195 1094)
    (196 1076)
    (197 1077)
    (198 1092)
    (199 1075)
    (200 1093)
    (201 1080)
    (202 1081)
    (203 1082)
    (204 1083)
    (205 1084)
    (206 1085)
    (207 1086)
    (208 1087)
    (209 1103)
    (210 1088)
    (211 1089)
    (212 1090)
    (213 1091)
    (214 1078)
    (215 1074)
    (216 1100)
    (217 1099)
    (218 1079)
    (219 1096)
    (220 1101)
    (221 1097)
    (222 1095)
    (223 1098)
    (224 1070)
    (225 1040)
    (226 1041)
    (227 1062)
    (228 1044)
    (229 1045)
    (230 1060)
    (231 1043)
    (232 1061)
    (233 1048)
    (234 1049)
    (235 1050)
    (236 1051)
    (237 1052)
    (238 1053)
    (239 1054)
    (240 1055)
    (241 1071)
    (242 1056)
    (243 1057)
    (244 1058)
    (245 1059)
    (246 1046)
    (247 1042)
    (248 1068)
    (249 1067)
    (250 1047)
    (251 1064)
    (252 1069)
    (253 1065)
    (254 1063)
    (255 1066)))

(remap-define-map "CP866"
  '((128 1040)
    (129 1041)
    (130 1042)
    (131 1043)
    (132 1044)
    (133 1045)
    (134 1046)
    (135 1047)
    (136 1048)
    (137 1049)
    (138 1050)
    (139 1051)
    (140 1052)
    (141 1053)
    (142 1054)
    (143 1055)
    (144 1056)
    (145 1057)
    (146 1058)
    (147 1059)
    (148 1060)
    (149 1061)
    (150 1062)
    (151 1063)
    (152 1064)
    (153 1065)
    (154 1066)
    (155 1067)
    (156 1068)
    (157 1069)
    (158 1070)
    (159 1071)
    (160 1072)
    (161 1073)
    (162 1074)
    (163 1075)
    (164 1076)
    (165 1077)
    (166 1078)
    (167 1079)
    (168 1080)
    (169 1081)
    (170 1082)
    (171 1083)
    (172 1084)
    (173 1085)
    (174 1086)
    (175 1087)
    (176 -1)
    (177 -1)
    (178 -1)
    (179 -1)
    (180 -1)
    (181 -1)
    (182 -1)
    (183 -1)
    (184 -1)
    (185 -1)
    (186 -1)
    (187 -1)
    (188 -1)
    (189 -1)
    (190 -1)
    (191 -1)
    (192 -1)
    (193 -1)
    (194 -1)
    (195 -1)
    (196 -1)
    (197 -1)
    (198 -1)
    (199 -1)
    (200 -1)
    (201 -1)
    (202 -1)
    (203 -1)
    (204 -1)
    (205 -1)
    (206 -1)
    (207 -1)
    (208 -1)
    (209 -1)
    (210 -1)
    (211 -1)
    (212 -1)
    (213 -1)
    (214 -1)
    (215 -1)
    (216 -1)
    (217 -1)
    (218 -1)
    (219 -1)
    (220 -1)
    (221 -1)
    (222 -1)
    (223 -1)
    (224 1088)
    (225 1089)
    (226 1090)
    (227 1091)
    (228 1092)
    (229 1093)
    (230 1094)
    (231 1095)
    (232 1096)
    (233 1097)
    (234 1098)
    (235 1099)
    (236 1100)
    (237 1101)
    (238 1102)
    (239 1103)
    (240 1025)
    (241 1105)
    (242 -1)
    (243 -1)
    (244 -1)
    (245 -1)
    (246 -1)
    (247 -1)
    (248 -1)
    (249 -1)
    (250 -1)
    (251 -1)
    (252 -1)
    (253 -1)
    (254 -1)
    (255 -1)))

(remap-define-map "cp1251"
  '((128 1026)
    (129 1027)
    (130 8218)
    (131 1107)
    (132 8222)
    (133 8230)
    (134 8224)
    (135 8225)
    (136 -1)
    (137 8240)
    (138 1033)
    (139 8249)
    (140 1034)
    (141 1036)
    (142 1035)
    (143 1039)
    (144 1106)
    (145 8216)
    (146 8217)
    (147 8220)
    (148 8221)
    (149 8226)
    (150 8211)
    (151 8212)
    (152 -1)
    (153 8482)
    (154 1113)
    (155 8250)
    (156 1114)
    (157 1116)
    (158 1115)
    (159 1119)
    (160 160)
    (161 1038)
    (162 1118)
    (163 1032)
    (164 164)
    (165 1168)
    (166 166)
    (167 167)
    (168 1025)
    (169 169)
    (170 1028)
    (171 171)
    (172 172)
    (173 173)
    (174 174)
    (175 1031)
    (176 176)
    (177 177)
    (178 1030)
    (179 1110)
    (180 1169)
    (181 181)
    (182 182)
    (183 183)
    (184 1105)
    (185 8470)
    (186 1108)
    (187 187)
    (188 1112)
    (189 1029)
    (190 1109)
    (191 1111)
    (192 1040)
    (193 1041)
    (194 1042)
    (195 1043)
    (196 1044)
    (197 1045)
    (198 1046)
    (199 1047)
    (200 1048)
    (201 1049)
    (202 1050)
    (203 1051)
    (204 1052)
    (205 1053)
    (206 1054)
    (207 1055)
    (208 1056)
    (209 1057)
    (210 1058)
    (211 1059)
    (212 1060)
    (213 1061)
    (214 1062)
    (215 1063)
    (216 1064)
    (217 1065)
    (218 1066)
    (219 1067)
    (220 1068)
    (221 1069)
    (222 1070)
    (223 1071)
    (224 1072)
    (225 1073)
    (226 1074)
    (227 1075)
    (228 1076)
    (229 1077)
    (230 1078)
    (231 1079)
    (232 1080)
    (233 1081)
    (234 1082)
    (235 1083)
    (236 1084)
    (237 1085)
    (238 1086)
    (239 1087)
    (240 1088)
    (241 1089)
    (242 1090)
    (243 1091)
    (244 1092)
    (245 1093)
    (246 1094)
    (247 1095)
    (248 1096)
    (249 1097)
    (250 1098)
    (251 1099)
    (252 1100)
    (253 1101)
    (254 1102)
    (255 1103)))

(remap-define-map "TeX Cyrillic"
  '(("{ya}" 1103)
    ("{Ya}" 1071)
    ("v" 1074)
    ("V" 1074)
    ("e" 1077)
    ("E" 1045)
    ("r" 1088)
    ("R" 1056)
    ("t" 1090)
    ("T" 1058)
    ("y" 1099)
    ("Y" 1067)
    ("u" 1091)
    ("U" 1059)
    ("i" 1080)
    ("I" 1048)
    ("o" 1086)
    ("O" 1054)
    ("p" 1087)
    ("P" 1055)
    ("{sh}" 1096)
    ("{Sh}" 1064)
    ("{shch}" 1097)
    ("{Shch}" 1065)
    ("a" 1072)
    ("A" 1040)
    ("{s}" 1089)
    ("{S}" 1057)
    ("d" 1076)
    ("D" 1044)
    ("f" 1092)
    ("F" 1060)
    ("g" 1075)
    ("G" 1043)
    ("{kh}" 1093)
    ("{Kh}" 1061)
    ("{\\u\\i}" 1081)
    ("{\\u I}" 1049)
    ("k" 1082)
    ("K" 1050)
    ("l" 1083)
    ("L" 1051)
    ("z" 1079)
    ("Z" 1047)
    ("{\\cprime}" 1100)
    ("{\\Cprime}" 1068)
    ("{ts}" 1096)
    ("{Ts}" 1064)
    ("{zh}" 1092)
    ("{Zh}" 1060)
    ("b" 1073)
    ("B" 1041)
    ("n" 1085)
    ("N" 1053)
    ("m" 1084)
    ("M" 1052)
    ("\\'e" 1101)
    ("\\'E" 1069)
    ("yu" 1102)
    ("{Yu}" 1070)
    ("{ch}" 1095)
    ("{Ch}" 1063)))

(remap-define-map "Russian Keys on QWERTY Keyboard"
  "RU Key"
  '((?q 1103)
    (?Q 1071)
    (?w 1074)
    (?W 1074)
    (?e 1077)
    (?E 1045)
    (?r 1088)
    (?R 1056)
    (?t 1090)
    (?T 1058)
    (?y 1099)
    (?Y 1067)
    (?u 1091)
    (?U 1059)
    (?i 1080)
    (?I 1048)
    (?o 1086)
    (?O 1054)
    (?p 1087)
    (?P 1055)
    (?[ 1096)
    (?{ 1064)
    (?] 1097)
    (?} 1065)
    (?a 1072)
    (?A 1040)
    (?s 1089)
    (?S 1057)
    (?d 1076)
    (?D 1044)
    (?f 1092)
    (?F 1060)
    (?g 1075)
    (?G 1043)
    (?h 1093)
    (?H 1061)
    (?j 1081)
    (?J 1049)
    (?k 1082)
    (?K 1050)
    (?l 1083)
    (?L 1051)
    (?z 1079)
    (?Z 1047)
    (?x 1100)
    (?X 1068)
    (?c 1096)
    (?C 1064)
    (?v 1092)
    (?V 1060)
    (?b 1073)
    (?B 1041)
    (?n 1085)
    (?N 1053)
    (?m 1084)
    (?M 1052)
    (?\\ 1101)
    (?| 1069)
    (?` 1102)
    (?~ 1070)
    (?= 1095)
    (?+ 1063)))

;;; Minor Modes

(defun remap-ru-key-koi8-mode (arg)
  "Koi8 on QWERTY keyboard."
  (interactive "P")
  (setq remap-mapping (remap-map "RU Key" (remap-reverse "Koi8")))
  (setq remap-double nil)
  (setq remap-mode-name "RU Key Koi8")
  (remap-mode arg))

(defun remap-ru-key-i5-mode (arg)
  "ISO 8859 5 on QWERTY keyboard."
  (interactive "P")
  (setq remap-mapping (remap-map "RU Key" (remap-reverse "ISO 8859 5")))
  (setq remap-double nil)
  (setq remap-mode-name "RU Key I5")
  (remap-mode arg))

(defun remap-ru-key-tex-mode (arg)
  "Cyrillic TeX on QWERTY keyboard."
  (interactive "P")
  (setq remap-mapping (remap-map "RU Key" (remap-reverse "TeX Cyrillic")))
  (setq remap-double nil)
  (setq remap-mode-name "RU Key Tex")
  (remap-mode arg))

;;;###autoload

(provide 'cyrillic)

;;; cyrillic.el ends here

